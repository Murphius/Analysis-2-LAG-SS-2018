%!TEX root = ../gesamt.tex

\begin{Satz}[verallgemeinerter Mittelwertsatz]{
	\label{satz_9}
	Seien $f,g : [a,b] \rightarrow \mathbb{R}$ stetig und auf ganz 
	$\left( a, b \right)$ differenzierbar. Dann existiert ein 
	$\xi \in (a,b) $ mit:
	\begin{align*}
		\left( g(b)- g(a)\right)f'(\xi) = 
		\left( f(b) - f(a) \right) g'(\xi)
	\end{align*}
}\end{Satz}

\begin{proof}
	Wir betrachten $h: [a,b] \rightarrow \mathbb{R}$ 
	\begin{align*}
		t \mapsto \left( g(b) -g(a)\right)f(t) - \left(f(b)-f(a)\right)g(t)
	\end{align*}
	Offensichtlich \emph{(nach Summenregel)} ist $h$ differenzierbar auf $(a,b)$.
	Es gilt:
	\begin{align*}
		h'(t) = \left(g(b)-g(a)\right)f'(t) - \left(f(b)-f(a)\right)g'(t)
	\end{align*}
	Wir zeigen: es existiert ein $\xi \in (a,b)$ mit $h'(\xi) = 0$. Damit folgt 
	dann die Aussage. \\
	\emph{Beachte:} 
	\begin{align*}
		h(a) = & \left(g(b)-g(a)\right)f(a) - \left(f(b)-f(a)\right)g(a) \\
		= & g(b) \cdot f(a) - f(b) \cdot g(a) \\
		= & \left(g(b) - g(a)\right)f(b) - \left(f(b)-f(a)\right)g(b) \\
		= & h(b)
	\end{align*}
	\textbf{Fall 1:}$h = const$ Dann gilt trivialerweise $h' = 0$ 
	und wir sind fertig. \\
	\textbf{Fall 2:}$h \neq const$ Offensichtlich ist $h$ stetig auf dem 
	abgeschlossenen Intervall $[a,b]$. Damit besitzt $h$ ein globales Maximum und 
	ein globales Minimum. Ohne Einschränkung existiert ein $\tilde{\xi} \in (a,b)$
	 mit $h(\tilde{\xi}) > h(a)$, sonst betrachte $-h$ statt $h$. \\
	 Also existiert ein $\xi \in (a,b)$ mit $h(\xi) \geq h(x)\textbf{ }
	  (x \in [a,b])$. 
	 Mit anderen Worten: $\xi$ ist auch ein globales Maximum und und daher auch 
	 ein lokales Maximum. Mit Satz~\ref{satz_8}
	 folgt: $h'(\xi) = 0$
	 \input{Plots/plot_MWS}
\end{proof}
	
\begin{Satz}[Mittelwertsatz(MWS)]{\label{vl_07_MWS}
	Sei $f: [a,b] \rightarrow \mathbb{R}$ stetig und differenzierbar auf 
	(a,b). Dann gibt es ein $\xi \in (a,b)$ mit 
	\begin{align*}
		f(b) -f(a) = (b-a) \cdot f'(\xi)
	\end{align*}
}\end{Satz}

\begin{Bemerkung}{
	 Es ist oft wichtig, dass f nur auf $(a,b)$ differenzierbar 
	sein muss.
}\end{Bemerkung}

\begin{proof}
	Das folgt aus Satz~\ref{satz_9}
	mit $g = id_{[a,b]}$, d.h. $g(x) = x \textbf{ } (x \in [a,b])$.
\end{proof}


\begin{Satz}{
	\label{satz_11}
	Sei $f:[a,b] \rightarrow \mathbb{R}$ stetig und differenzierbar auf $(a,b)$. 
	Dann gilt:
	\renewcommand{\labelenumi}{\alph{enumi})}
	\begin{enumerate}
		\item $f = const \Leftrightarrow f'(x) = 0$ $(x\in(a,b))$
		\item $f$ ist monoton wachsend $\Leftrightarrow f'(x) \geq 0 (x \in (a,b))$
		\item $f$ ist streng monoton wachsend $\Leftrightarrow f'(x) > 0 (x \in (a,b
		))$
		\item $f$ ist monoton fallend $\Leftrightarrow f'(x) \leq 0 (x \in (a,b))$
		\item $f$ ist streng monoton fallend $\Leftrightarrow f'(x) < 0 
		(x \in (a,b))$ 
	\end{enumerate}
}\end{Satz}

\begin{proof}
	a) folgt aus b) und c). \\
	Weiterhin folgt d) beziehungsweise e) aus b) beziehungsweise c). \\
	Sei $ y > x \in [a,b]$. Sei $f|_{[x,y]}$ die \textit{Einschränkung} 
	von $f$ auf $[x,y]$, das heißt: 
	\begin{equation*}
		f|_{[x,y]} : [x,y] \rightarrow \mathbb{R}, z \mapsto f(z)
	\end{equation*}
	Offensichtlich erfüllt $f|_{[x,y]}$ die Bedingungen des MWS. \\
	Es existiert 
	ein $\xi \in (x,y)$ mit $f(y)-f(x) = (y-x)\cdot f'(\xi)$\\
	\textbf{Fall b)} $f(y)-f(x) = (y-x)\cdot f'(\xi) \geq 0$ \\
	\hspace*{1.5cm}\rotatebox[origin=c]{180}{$\Lsh$} $f(y) \geq f(x) $ \\
	\textbf{Fall c)} $f(y)-f(x) > 0$ \\
	\hspace*{1.5cm}\rotatebox[origin=c]{180}{$\Lsh$}$f(y) > f(x)$ \\
	\emph{Beweis der Richtung $\Leftarrow$ in Teil b):} Ist $f'(x) \geq 0$ so gilt
	\begin{align*}
		\lim\limits_{y \searrow x}{\frac{f(y)-f(x)}{y-x}}
		=\lim\limits_{y \nearrow x}{\frac{f(x) -f(y)}{x-y}} \geq 0
	\end{align*}
	Da $f$ monoton wachsend ist, gilt für $y > x$: 
	\begin{align*}
		\frac{f(y)-f(x)}{y-x} \geq 0
	\end{align*}	 
	Folglich gilt: 
	\begin{align*}
		\lim\limits_{y \searrow x}{\frac{f(y)-f(x)}{y-x} } \geq 0
	\end{align*}
	Äquivalent für $\lim\limits_{y \nearrow x}{ }$. 
\end{proof}


\begin{Korollar}{
	Seien $f,g : [a,b] \rightarrow \mathbb{R}$ stetig und differenzierbar auf
	$(a,b)$ mit $f'(x) = g'(x)$ für $x \in (a,b)$. Dann gilt $f-g = const$
}\end{Korollar}

\begin{proof}
	Es gilt: 
	\begin{align*}
		(f-g)'(x) = f'(x)-g'(x) = 0
	\end{align*}
	Damit folgt die Aussage mit Satz~\ref{satz_11}.
\end{proof}

\begin{Satz}{
	Sei $f: I \rightarrow \mathbb{R}$ zweimal differenzierbar $(I \subseteq 
	\mathbb{R}$ Intervall$)$. Gibt es $\xi \in I$ mit $f'(\xi) = 0$ und 
	$f''(\xi) < 0 \textbf{ }  (f''(\xi)> 0)$, so nimmt $f$ an der Stelle $\xi$ ein 
	striktes lokales Maximum (Minimum) an.
}\end{Satz}

\begin{proof}
	Wir betrachten nur den Fall $f''(\xi) < 0$. Für den Fall
	$f''(\xi) > 0$ betrachte man $-f$.\\
	Per Definition haben wir also: 
	\begin{align*}
		f''(\xi) = \lim\limits_{x \rightarrow \xi}{\frac{f'(x) - f'(\xi)}{x - \xi} }
		< 0
	\end{align*}
	$r := \lim\limits_{x \rightarrow \xi}{\frac{f'(x) - f'(\xi)}{x - \xi} } $ \\
	Das heißt es existiert für jedes $ \epsilon > 0$ ein $\delta > 0$ mit:
	\begin{align*}
		\left\vert \frac{f'(x) - f'(\xi)}{x - \xi} - r \right\vert < \epsilon
	\end{align*}
	
	Für $\epsilon := \frac{r}{2}$ gilt daher: 
	\begin{align*}
		\left\vert \frac{f'(\xi) - f'(x)}{\xi - x}-r \right\vert < \left\vert \frac{r}{2} \right\vert  \text{ für ein entsprechend gewähltes } \delta > 0
	\end{align*}
 Insbesondere gilt also:
	\begin{align*}
		\frac{f'(\xi)-f'(x)}{\xi - x} < 0
	\end{align*}
	für alle $ x \in ( \xi - \delta, \xi + \delta)$.\\
	Das heißt für $x < \xi$ gilt: 
	\begin{align*}
		f'(\xi) - f'(x) < 0
	\end{align*}
	und für $ x > \xi$ gilt: 
	\begin{align*}
		f'(\xi) - f'(x) > 0
	\end{align*}
	Ergo: $f'$ ist streng monoton fallend auf $(\xi - \delta, \xi]$ und 
	streng monoton wachsend auf $[ \xi, \xi + \delta)$ \\
	Da $f'(\xi) = 0$ folgt, dass $f'(x) > 0$ für $x \in (\xi-\delta, \xi]$
	und $f'(x) <0 $ für $x \in [\xi, \xi + \delta)$.\\
	  Mit Satz~\ref{satz_11} folgt: \\
	  	\hspace*{5mm}$f|_{(\xi-\delta, \xi]}$ ist streng monoton wachsend und \\
	  	\hspace*{5mm}$f|_{[\xi, \xi + \delta)}$ ist streng monoton fallend.
\end{proof}

\begin{Satz}[Regel von l'Hospital]{\label{regel_von_hospital}
	Seien $f,g: (a,b) \rightarrow \mathbb{R}$ mit
	\begin{align*}
		-\infty \leq a < b \leq \infty
	\end{align*}		
	differenzierbar und $g'(x) \neq 0$ für alle $x \in (a,b)$. Weiter gelte:
	\begin{align*}
		\lim\limits_{x \rightarrow a}{\frac{f'(x)}{g'(x)} } = A
	\end{align*}
	Wobei  $ -\infty \leq A \leq \infty$ sei und 
	$\lim\limits_{x \rightarrow a}{f(x) = 0}$, \\ 
	sowie 
	$\lim\limits_{x \rightarrow a}{g(x) = 0} $
	bzw. $\lim\limits_{x\rightarrow a}{g(x) = \pm \infty}$.\\
	Dann gilt: $\lim\limits_{x \rightarrow a}{\frac{f(x)}{g(x)} = A}$.
	Die analoge Aussage gilt auch für $x \rightarrow b$.
}\end{Satz}

\begin{Bemerkung}{
	\begin{itemize}
		\item[ ]
		\item Wir verwenden hier den erweiterten Grenzwertbegriff, d.h. $\pm \infty$ 
		sind als Grenzwerte zulässig.
		\item Zwei wesentliche Voraussetzungen:
			\begin{enumerate}
				\item $\lim\limits_{x \rightarrow a}
				{\frac{f'(x)}{g'(x)}}$ existiert!
				\item ebenso ist essentiell, dass $f,g \rightarrow 
				\frac{\circ }{\pm \infty}$
			\end{enumerate}
		\item Gegebenenfalls lässt sich l'Hospital iterieren:
		\begin{align*}
			\lim\limits_{x \rightarrow \infty}{\frac{x^2}{exp(x)}} = 
			\lim\limits_{x \rightarrow \infty}{\frac{2x}{exp(x)}} = 
			\lim\limits_{x \rightarrow \infty}{\frac{2}{exp(x)}} = 0
		\end{align*}
		\item Man kann l'Hospital auch verwenden um Ausdrücke der Form 
		$0 \cdot \infty$ zu behandeln, indem wir diese in die Form
		\begin{align*}
		 	\frac{\infty}{\infty} = & \frac{\infty}{\frac{1}{\infty}} \text{ beziehungsweise } \\ 
			\frac{0}{0} = & \frac{0}{\frac{1}{\infty}}
		\end{align*}
		umrechnen.
	\end{itemize}
}\end{Bemerkung}
	
\begin{proof}
	Wir beschränken uns auf den Fall $x \rightarrow a$ 
	$(x \rightarrow b$ läuft analog$)$ und zeigen zunächst folgende Aussage: \\
	\emph{Behauptung:} Sei $A \in [-\infty, \infty)$. \\ 
	Dann existiert für jedes $q > A$ ein $c > a$ mit
	 $$\forall x\in (a,c): \frac{f(x)}{g(x)} < q \,.$$ \\
	\emph{Beweis der Behauptung:} \\
	Da $\frac{f'(x)}{g'(x)} \xrightarrow{{x \searrow a}} A$ 
	existiert ein $c' > a$ mit: $\frac{f'(x)}{g'(x)}<r$ für ein beliebiges 
	$r \in (A,q)$\footnote{Anmerkung von Basti: das $r$ hat den gleichen Zweck wie $q$, man muss es nur aus \enquote{technischen Gründen} einführen, da weiter unten durch Grenzwertbildung ein $\leq$ statt $<$ entsteht. Man kann $r$ auch speziell wählen, falls einem das lieber ist: z.B. wäre $r=\frac{(A+q)}{2}$ eine geeignete Wahl.} und $x \in (a,c')$.\\
	Nach dem verallgemeinerten Mittelwertsatz gilt:
	\begin{align}
		\label{gleichung_beweis_lh_1}
		\frac{f(x)-f(y)}{g(x)-g(y)} = \frac{f'(t)}{g'(t)}
	\end{align}
	für ein geeignetes $t \in  (x,y)$. \\
	Für $a < x < y <c'$ gilt daher:
	\begin{align}
		\label{gleichung_beweis_lh_2}
		\frac{f(x)-f(y)}{g(x)-g(y)} < r
	\end{align}

	\begin{enumerate}[label=Fall {\arabic*}]
		\item[Fall 1:] $f,g \overset{x \rightarrow a}{\longrightarrow} 0$. 
		Nach Gleichung~\eqref{gleichung_beweis_lh_2}
		gilt für $x \rightarrow a$ 
		\begin{align*}
			\forall y \in (a, c') : \frac{-f(y)}{-g(y)} = \frac{f(y)}{g(y)} \leq r <q
		\end{align*}
		\todo{Hier stand \enquote{$<r$}, aber nach dem Grenzwert sollte es $\leq r$ sein}
		\item[Fall 2:] $g(x) \overset{x \rightarrow a}{\rightarrow}\pm \infty$
		Multipliziere \eqref{gleichung_beweis_lh_1} mit
		$\frac{g(x)-g(y)}{g(x)}$. \\
		Dann erhalten wir:
		\begin{align*}
			\frac{f(x)}{g(x)} - \frac{f(y)}{g(x)} = \frac{f'(t)}{g'(t)}
			\left( 1 - \frac{g(y)}{g(x)}\right) \\
			 \rightarrow \frac{f(x)}{g(x)} = \frac{f'(t)}{g'(t)} \left(
			1- \frac{g(y)}{g(x)}\right) + \frac{f(y)}{g(x)}
		\end{align*}
		Für $x \rightarrow a$:
		\begin{align*}
			\lim\limits_{x\rightarrow a}{\frac{f(x)}{g(x)}}\leq r < q
		\end{align*}
	\end{enumerate}
		Es muss also ein $ c > a$ existieren sodass:\\ 
		$$\forall x \in (a,c): \frac{f(x)}{g(x)} <$$ \\
		
		Analog kann man zeigen: \\
		\emph{Behauptung' :} Sei $A  \in (-\infty, \infty]$. Dann existiert für 
		jedes $p <A$ ein $d > a$, so dass $p < \frac{f(x)}{g(x)}$ $(x \in (a,d))$\\
		Für $A = +\infty$ folgt die Aussage aus der letzten Behauptung, für 
		$ A = - \infty$ aus der ersten Behauptung. \\
		Für $A \in \mathbb{R}$ argumentieren wir wie folgt: \\
		Sei $\epsilon > 0$ gegeben. Nach der ersten Behauptung existiert 
		$c > a$, so dass $\frac{f(x)}{g(x)} < A + \epsilon$ $(x\in (a,c))$. 
		Nach der zweiten Behauptung existiert $d > a$ mit:
		\begin{align*}
			\frac{f(x)}{g(x)} > A - \epsilon \text{ } (x \in (a,d))
		\end{align*}
		Für $x \in (a, \min\{c,d\})$ gilt daher
		\begin{align*}
			\frac{f(x)}{g(x)} \in B_{\epsilon}(A)
		\end{align*}
\end{proof}

\begin{Beispiel}{
	$f(x) = 1, g(x) = x + 7$\\
	Dann gilt: $\lim\limits_{x \rightarrow 0 }{\frac{f(x)}{g(x)} = \frac{1}{7}}$ \\
 aber:$ \lim\limits_{x \rightarrow 0 }{\frac{f'(x)}{g'(x)} = \frac{0}{	1}= 0}$
}\end{Beispiel}
